# Конструкторы экземпляров и классы \(ссылочные типы\)

Конструкторы — это специальные методы, позволяющие корректно инициализировать новый экземпляр типа. В таблице определений, входящих в метаданные, методы-конструкторы всегда отмечают сочетанием .ctor \(от constructor\). При создании экземпляра объекта ссылочного типа выделяется память для полей данных экземпляра и инициализируются служебные поля \(указатель на объект-тип и индекс блока синхронизации\), после чего вызывается конструктор экземпляра, устанавливающий исходное состояние нового объекта.

Конструкторы в отличие от других методов не наследуются из базового класса.

Для абстрактных классов компилятор создает конструктор по умолчанию с модификатором protected, в противном случае область действия будет открытой \(public\).

Конструкторов может быть несколько. В случае, если мы внутри нашего типа определяем какие-то поля примитивного или любого другого типа и сразу же в коде инициализируем значение, то IL-код этих полей будет выполняться в начале каждого метода-конструктора.

```
internal sealed class SomeType {
private Int32 m_x = 5;
private String m_s = "Hi there";
private Double m_d = 3.14159;
private Byte m_b;

// Это конструкторы
public SomeType()         { ... }
public SomeType(Int32 x)  { ... }
public SomeType(String s) { ...; m_d = 10; } }
```

# Конструкторы экземпляров и структуры \(значимые типы\)

Конструкторы значимых типов \(struct\) работают иначе, чем ссылочных \(class\). CLR всегда разрешает создание экземпляров значимых типов и этому ничто не может помешать. Поэтому, по большому счету, конструкторы у значимого типа можно не определять. Фактически многие компиляторы \(включая C\#\) не определяют для значимых типов конструкторы по умолчанию, не имеющие параметров.

---

# 





